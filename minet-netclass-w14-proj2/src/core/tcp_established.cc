e ESTABLISHED::wq
                   {
                        cout << "We are in ESTABLISHED!!" << endl;
                        debug_output(c_list,flags,seqNum,ackNum);

                        //handle state ESTABLISHED
                        //                        bool data_ok = (*c_list).state.SetLastRecvd(seqNum,dataLength); //check and set last_received
                        //                                        //      printf("total_len: %d \n", total_len);
                        //                                                                if (checkSum && data_ok){ //if checksum ok and expected seq num ok, process packet and pass data to socket
                        //                                                                                                cout<<"We get in here!!!!"<<endl;
                        //                                                                                                                                if (IS_ACK(flags)) {
                        //                                                                                                                                                                        (*c_list).state.SetLastAcked(ackNum); //accumulative ack, so anything before acknum should be acked already
                        //                                                                                                                                                                                                                if (ackNum == (*c_list).state.GetLastSent() - 1) {
                        //                                                                                                                                                                                                                                                                (*c_list).bTmrActive = false;
                        //                                                                                                                                                                                                                                                                                                        } else {
                        //                                                                                                                                                                                                                                                                                                                                                        (*c_list).bTmrActive = true;
                        //                                                                                                                                                                                                                                                                                                                                                                                                        (*c_list).timeout = Time() + 30;
                        //                                                                                                                                                                                                                                                                                                                                                                                                                                                }
                        //
                        //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                }
                        //
                        //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                if (IS_FIN(flags)) {
                        //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        (*c_list).state.SetLastRecvd(seqNum); //no more data
                        //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                (*c_list).state.SetState(CLOSE_WAIT); //change state into CLOSE_WAIT
                        //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                }
                        //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 unsigned char setAck = 0;
                        //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  SET_ACK(setAck);
                        //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  (*c_list).state.SetSendRwnd(winSize); //update winsize
                        //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  constructPacket(pToSend, *c_list, 0, setAck);
                        //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  MinetSend(mux, pToSend);
                        //
                        //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  //send packet to socket
                        //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  sockRp.type = WRITE;
                        //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  sockRp.connection = connection;
                        //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  sockRp.error = EOK;
                        //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  sockRp.bytes = dataLength;
                        //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  sockRp.data = data;
                        //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  MinetSend(sock,sockRp);
                        //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          } else { //something is not right, re-acked OR we can probably do nothing and wait for timeout
                        //
                        //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           unsigned char setAck = 0;
                        //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            SET_ACK(setAck);
                        //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            constructPacket(pToSend, *c_list, 0, setAck);
                        //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            MinetSend(mux, pToSend);
                        //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    }
                        //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            break;
                        //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               }
                        //
